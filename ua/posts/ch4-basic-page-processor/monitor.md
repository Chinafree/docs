### 4.6 Монітор з JMX

Шукачі монітор 0.5.0 нові функції. За допомогою цієї функції ви можете перевірити виконання пошукових роботів - скільки сторінок були розвантажені, скільки сторінок, скільки запускає потік і іншу інформацію. Функціональність через реалізації JMX, ви можете використовувати інструмент, щоб побачити JConsole т.д. JMX локальної або віддаленої інформації на гусеничному ходу.

Якщо ви не JMX не має значення, оскільки його використання є відносно простим, ця глава буде використовувати більш докладне пояснення. Якщо ви хочете дізнатися, де цей принцип, можливо, буде потрібно якийсь знання JMX рекомендується прочитати: [JMX Оздоблення] (http://my.oschina.net/xpbug/blog/221547). У мене є багато частини статті було посилання.

Примітка: Якщо ви визначаєте планувальник, вам потрібно використовувати цей клас реалізує інтерфейс `MonitorableScheduler` для перегляду" LeftPageCount "і" TotalPageCount "ці два повідомлення.

#### 4.6.1 Додати проект моніторингу

Додати моніторинг дуже просто, отримати `SpiderMonitor` одноелементний `SpiderMonitor.instance ()`, і ви хочете контролювати реєстрацію Павук піти. Ви можете зареєструвати декілька павука, щоб `SpiderMonitor`.

```java
public class MonitorExample {

    public static void main(String[] args) throws Exception {

        Spider oschinaSpider = Spider.create(new OschinaBlogPageProcessor())
                .addUrl("http://my.oschina.net/flashsword/blog");
        Spider githubSpider = Spider.create(new GithubRepoPageProcessor())
                .addUrl("https://github.com/code4craft");

        SpiderMonitor.instance().register(oschinaSpider);
        SpiderMonitor.instance().register(githubSpider);
        oschinaSpider.start();
        githubSpider.start();
    }
}
```

#### 4.6.2 Подивитися інформацію про моніторинг

WebMagic моніторинг за допомогою JMX забезпечує управління, ви можете використовувати будь-який клієнт JMX з підтримкою для підключення. Ми тут, щоб JDK приходить приклад JConsole. Ми спочатку почати павук WebMagic і додати код монітора. Потім ми JConsole для його перегляду.

Ми починаємо програму відповідно до прикладу 4.6.1, а потім введіть команду JConsole (під Windows, інтерфейс командного рядка (CLI) вводиться в DOS jconsole.exe), щоб почати JConsole.

![Jconsole](http://webmagic.qiniudn.com/oscimages/231513_lP2O_190591.png)

Тут ми вирішили почати локальний процес WebMagic вибрати "MBean" Після підключення, відкриваючи "WebMagic", буде в змозі побачити всю інформацію здійснює моніторинг Павука!

Тут ми можемо також вибрати "дію" в операції, де ви можете вибрати, щоб почати -start () і термінації сканерів -STOP (), який буде безпосередньо викликати відповідний старт павука () і зупинки () метод для досягнення мети базова контроль.

![Jconsole-шоу](http://webmagic.qiniudn.com/oscimages/231652_B3Mt_190591.png)

#### 4.6.3 Розширений інтерфейс моніторингу

На додаток до деяких з існуючої інформації моніторингу, якщо у вас є більше інформації необхідно контролювати, також може бути розширена, щоб вирішити. Ви можете успадковувати `SpiderStatusMXBean` для досягнення розширення, конкретні приклади можна побачити тут:
[Користувальницьких розширень demo](https://github.com/code4craft/webmagic/tree/master/webmagic-extension/src/test/java/us/codecraft/webmagic/monitor).
